{{ define "title" }}Containerlab Inspect{{ end }}

{{ define "content" }}
<h1>Containerlab Inspect</h1>
<p class="muted">Base directory: <code id="baseDir">{{ .BaseDir }}</code></p>

<form id="f">
  <fieldset>
    <legend>Inputs</legend>
    <label>
      Lab file
      <input id="lab" type="text" value="lab.clab.yml" required>
    </label>
    <label>
      Timeout (seconds)
      <input id="timeout" type="number" min="1" max="60" value="15">
    </label>
    <label class="checkbox">
      <input id="sudo" type="checkbox" checked> Use sudo (non-interactive)
    </label>
  </fieldset>
  <div>
    <button id="runBtn" type="submit">Inspect</button>
    <span id="spinner" class="spinner" hidden>Runningâ€¦</span>
  </div>
</form>

<h2>Run commands on cEOS</h2>
<form id="execForm">
  <div class="row">
    <label>Username <input id="euser" type="text" value="admin"></label>
    <label>Password <input id="epass" type="password" value="admin"></label>
    <label>Format
      <select id="fmt">
        <option value="json" selected>json</option>
        <option value="text">text</option>
      </select>
    </label>
  </div>
  <label>
    Commands (one per line)
    <textarea id="cmds" rows="4">show bgp evpn summary
show vxlan vtep</textarea>
  </label>
  <button id="runCmdsBtn" type="submit">Run on all cEOS</button>
</form>

<section id="execOut" hidden>
  <h3>Command results</h3>
  <div id="execResults"></div>
</section>

<h2>Health check</h2>
<form id="healthForm">
  <button id="healthBtn" type="submit">Run EVPN health</button>
</form>
<section id="healthOut" hidden>
  <h3>Node health</h3>
  <div id="healthResults"></div>
</section>

<section id="result" hidden>
  <h2>Nodes (<span id="labKey"></span>)</h2>
  <table id="nodesTbl">
    <thead><tr><th>Name</th><th>Kind</th><th>Image</th><th>State</th><th>IPv4</th><th>Owner</th></tr></thead>
    <tbody></tbody>
  </table>
  <details><summary>Raw JSON</summary><pre id="rawJson"></pre></details>
</section>
{{ end }}